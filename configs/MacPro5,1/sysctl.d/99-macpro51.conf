# linux-mac: Mac Pro 5,1 Performance Tuning
# Install to /etc/sysctl.d/99-macpro51.conf
#
# Status: Template — values based on typical 32-64GB configurations.
# Adjust for your actual RAM size.

# --- Memory (tuned for 32-64GB RAM, typical upgraded 5,1) ---
# Keep data in RAM — 5,1 owners often have 32-64GB
vm.swappiness = 10
# Retain filesystem caches longer
vm.vfs_cache_pressure = 50
# Start flushing dirty pages at 10% of RAM
vm.dirty_ratio = 10
# Background writeback starts at 5% of RAM
vm.dirty_background_ratio = 5

# --- Network (tuned for dual GbE) ---
# Larger socket buffers for throughput
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
# TCP Fast Open for client + server
net.ipv4.tcp_fastopen = 3
# Handle burst traffic
net.core.netdev_max_backlog = 5000
# Google BBR congestion control (requires CONFIG_TCP_CONG_BBR=y)
net.ipv4.tcp_congestion_control = bbr

# --- Kernel ---
# Reduce console log noise
kernel.printk = 3 4 1 3
